[globalsfm_pipeline]
ProfileCommit=GlobalSfM Pipeline Demo
enable_copyright_manager=true
# Log level settings (compatible with legacy system) | 日志级别设置（兼容原有系统）:
# 0 = PO_LOG_NONE (basic output, mapped to INFO level) | 基本输出，映射到INFO级别
# 1 = PO_LOG_NORMAL (normal output, mapped to INFO level) | 普通输出，映射到INFO级别  
# 2 = PO_LOG_VERBOSE (verbose output, mapped to DEBUG level) | 详细输出，映射到DEBUG级别
# Extended levels: 3=WARNING, 4=ERROR, 5=OFF | 扩展级别：3=WARNING, 4=ERROR, 5=OFF
log_level=1
# Performance analysis options | 性能分析选项
enable_profiling=true                  # Enable performance profiling | 是否启用性能分析
enable_evaluator=true                  # Enable evaluation | 是否启用评估
enable_rotation_refine=false         # Enable rotation refinement using color-based block matching (Step 2.5) | 是否启用基于颜色块匹配的旋转优化（步骤2.5）
                                     # false: skip rotation refinement step | 跳过旋转优化步骤
                                     # true: refine relative rotations before rotation averaging using RotationRefineByFeatures | 在旋转平均前使用RotationRefineByFeatures优化相对旋转
                                     # Runs between Step2_TwoViewEstimation and Step3_RotationAveraging | 在Step2_TwoViewEstimation和Step3_RotationAveraging之间运行

# ======================================================
# Base Configuration Parameters (BaseParameters) | 基础配置参数 (BaseParameters)
# ======================================================
dataset_dir={exe_dir}/../tests/Strecha                  # Dataset root directory path (relative to executable) | 数据集根目录路径（相对于可执行文件）
image_folder=#{dataset_dir}/Herz-Jesus-P25/images                          # Image folder path (optional, if not specified, process all datasets in dataset_dir) | 图像文件夹路径（可选，如果不指定则处理dataset_dir中的所有数据集）
work_dir={exe_dir}/globalsfm_pipeline_work  # Working directory | 工作目录
gt_folder=                             # Ground truth data folder (automatically set at runtime based on dataset) | 真值数据文件夹（运行时根据数据集自动设置）
enable_evaluation=true                 # Enable accuracy evaluation | 是否启用精度评估
enable_summary_table=true             # Enable unified table functionality (generate summary table for batch processing) | 是否启用统一制表功能（批处理时生成汇总表格）
preprocess_type=posdk                 # Preprocessing type: openmvg(default), opencv, posdk | 预处理类型： openmvg(默认), opencv, posdk
                                      # openmvg: Use OpenMVG pipeline | 使用OpenMVG流水线
                                      # opencv: Use PoSDK with method_img2matches (OpenCV-based) | 使用PoSDK的method_img2matches（基于OpenCV）
                                      # posdk: Use PoSDK with posdk_preprocessor (optimized) | 使用PoSDK的posdk_preprocessor（优化版）
enable_features_info_print=false      # Enable feature info printing after preprocessing (display image ID, path, feature count) | 是否启用预处理后特征信息打印（显示图像ID、路径、特征点数量）

# Cache directory configuration | 缓存目录配置
cache_directories=storage/features,storage/matches,storage/logs,storage/poses  # Cache directory list | 缓存目录列表

# ======================================================
# Pipeline Control Parameters | 流水线控制参数
# ======================================================
enable_matches_visualization=false    # Enable matches visualization (before and after two-view estimation) | 是否启用匹配关系可视化（双视图估计前后）
enable_csv_export=true                 # Enable evaluation result CSV export | 是否启用评估结果CSV导出
enable_manual_eval=false               # Enable manual evaluation (for verifying automatic evaluation correctness, consistent with test_Strecha.cpp evaluation logic) | 是否启用手动评估（用于验证自动评估结果的正确性，与test_Strecha.cpp评估逻辑一致）
enable_3d_points_output=true          # Output 3D points in final results | 是否在最终结果中输出3D点
                                       # false: return only data_global_poses (Step6 output) | 仅返回data_global_poses（Step6输出）
                                       # true: return DataPackage containing data_global_poses+data_3d_points (Step6+Step7 output) | 返回DataPackage包含data_global_poses+data_3d_points（Step6+Step7输出）
enable_meshlab_export=true           # Enable Meshlab project file export (test_Strecha.cpp implementation) | 是否启用Meshlab工程文件导出（参考test_Strecha.cpp实现）
                                       # false: do not export Meshlab project files | 不导出Meshlab工程文件
                                       # true: export Meshlab visualization project (.mlp) with poses+3D points | 导出包含位姿+3D点的Meshlab可视化工程（.mlp）
enable_posdk2colmap_export=true      # Enable PoSDK2Colmap export | 是否启用PoSDK2Colmap导出
                                       # false: do not export Colmap format data | 不导出Colmap格式数据
                                       # true: export PoSDK reconstruction to Colmap format (cameras, images, points3D) | 导出PoSDK重建结果到Colmap格式（相机、图像、3D点）
                                       # Export directory: work_dir/dataset_name/posdk2colmap_export | 导出目录: work_dir/dataset_name/posdk2colmap_export
                                       # Scaling method: Normalize minimum camera distance to 1.0 (excluding pure rotation) | 缩放方法：最小相机间距离标准化为1.0（排除纯旋转）
enable_data_statistics=false          # Enable pipeline data statistics functionality | 是否启用流水线数据统计功能
                                       # false: do not generate data statistics report (default, improve performance) | 不生成数据统计报告（默认，提高性能）
                                       # true: generate detailed data statistics for each step and output to MD document | 为每个步骤生成详细的数据统计信息并输出到MD文档
                                       # Output file: work_dir/dataset_name/pipeline_data_statistics.md | 输出文件: work_dir/dataset_name/pipeline_data_statistics.md
evaluation_print_mode=none          # Evaluation result print mode: none(no print), summary(brief), detailed(detailed), comparison(comparison) | 评估结果打印模式：none(不打印), summary(简要), detailed(详细), comparison(对比)
compared_pipelines=openmvg,colmap,glomap  # Comparison pipeline list (comma-separated): "openmvg", "colmap", "glomap" | 对比流水线列表（逗号分隔）："openmvg", "colmap", "glomap"
                                      # NOTE: This is DIFFERENT from preprocess_type | 注意：这与preprocess_type不同
                                      # - preprocess_type: Main preprocessing method (openmvg/opencv/posdk) | 主预处理方法（openmvg/opencv/posdk）
                                      # - compared_pipelines: Complete pipelines to run for comparison (openmvg/colmap/glomap) | 用于对比运行的完整流水线（openmvg/colmap/glomap）
                                      # Supports case-insensitive, automatic whitespace removal, e.g.: "OpenMVG, Colmap" | 支持大小写不敏感，自动去除空白字符，如："OpenMVG, Colmap"
                                      # Comparison results will be added to EvaluatorManager with algorithm names like "openmvg_pipeline", "colmap_pipeline", "glomap_pipeline" | 对比结果将添加到EvaluatorManager中，算法名为"openmvg_pipeline"、"colmap_pipeline"、"glomap_pipeline"等
                                      # Example: compared_pipelines=openmvg,colmap,glomap | 例如：compared_pipelines=openmvg,colmap,glomap

# ======================================================
# Other Parameters (use default values, set dynamically at runtime) | 其他参数（使用默认值，运行时动态设置）
# ======================================================

# ==================== Sub-method Configuration | 子方法配置 ====================

[openmvg_pipeline]
# OpenMVG preprocessing configuration - fully consistent with test_Strecha.cpp | OpenMVG预处理配置 - 与test_Strecha.cpp完全一致
# Note: Path parameters (root_dir, dataset_dir, images_folder, work_dir) are unified managed by main config, passed dynamically at runtime
# 注意：路径参数(root_dir, dataset_dir, images_folder, work_dir)由主配置统一管理，运行时动态传递
ProfileCommit=GlobalSfM pipeline OpenMVG preprocessing aligned with test_Strecha
# General settings - fully consistent with test_Strecha.cpp | 通用设置 - 与test_Strecha.cpp完全一致
force_compute=true                     # Force recomputation (corresponds to -f 1 in MATLAB) | 强制重新计算（对应MATLAB中的 -f 1）
debug_output=true                      # Convenient for debugging | 方便调试
num_threads=4                          # Number of threads (corresponds to -n 4 in MATLAB) | 线程数（对应MATLAB中的 -n 4）
save_features=true                     # Save features to storage | 保存特征到存储
save_matches=true                      # Save matches to storage | 保存匹配到存储

# SfMInit_ImageListing settings - fully consistent with test_Strecha.cpp | SfMInit_ImageListing 设置 - 与test_Strecha.cpp完全一致
intrinsics=2759.48,0,1520.69,0,2764.16,1006.81,0,0,1  # Strecha dataset camera intrinsics (corresponds to -k in MATLAB) | Strecha数据集相机内参（对应MATLAB中的 -k）
camera_model=1                         # Camera model (corresponds to -c 1 in MATLAB) | 相机模型（对应MATLAB中的 -c 1）
group_camera_model=1                   # Group camera model (corresponds to -g 1 in MATLAB) | 分组相机模型（对应MATLAB中的 -g 1）

# ComputeFeatures settings - fully consistent with test_Strecha.cpp | ComputeFeatures 设置 - 与test_Strecha.cpp完全一致
describer_method=SIFT                  # Feature descriptor method (corresponds to -m SIFT in MATLAB) | 特征描述子方法（对应MATLAB中的 -m SIFT）
describer_preset=HIGH                  # Feature preset quality (corresponds to -p HIGH in MATLAB) | 特征预设质量（对应MATLAB中的 -p HIGH）

# ComputeMatches settings - fully consistent with test_Strecha.cpp | ComputeMatches 设置 - 与test_Strecha.cpp完全一致
nearest_matching_method=FASTCASCADEHASHINGL2  # Feature matching method (corresponds to -n in MATLAB) (source code + SOTA matching algorithm source code | feature extraction+matching) | 特征匹配方法（对应MATLAB中的 -n） (源码 + SOTA匹配算法源码 ｜ 特征提取+匹配)
ratio=0.8                              # Lowe ratio test threshold (corresponds to -r 0.55 in MATLAB) | Lowe比率测试阈值（对应MATLAB中的 -r 0.55）

# GeometricFilter settings - fully consistent with test_Strecha.cpp | GeometricFilter 设置 - 与test_Strecha.cpp完全一致
geometric_model=e                      # Geometric model: e=essential matrix (corresponds to -g e in MATLAB) | 几何模型：e=本质矩阵（对应MATLAB中的 -g e）

# SfM reconstruction settings - fully consistent with test_Strecha.cpp | SfM重建设置 - 与test_Strecha.cpp完全一致
enable_sfm_reconstruction=false         # Enable SfM reconstruction to generate tracks file | 启用SfM重建以生成tracks文件
sfm_engine=GLOBAL                      # Use Global SfM | 使用Global SfM

export_relative_poses_file = storage/poses/relative_poses.g2o
log_level=2

[method_img2matches]
enable_profiling=true                # Enable performance profiling | 是否启用性能分析
log_level=0


[TwoViewEstimator]
# Two-view estimator configuration - consistent with test_Strecha.cpp | 双视图估计器配置 - 与test_Strecha.cpp一致
estimator=opencv_two_view_estimator    # Estimator type | 估计器类型 opencv_two_view_estimator|barath_two_view_estimator
enable_refine=false                    # Enable refinement optimization | 是否启用精细优化
enable_evaluator=false                  # Enable automatic evaluation | 启用自动评估功能
log_level=0
enable_profiling=false                # Enable performance profiling | 是否启用性能分析

[method_rotation_averaging]
# Rotation averaging configuration | 旋转平均配置
enable_profiling=false                # Enable performance profiling | 是否启用性能分析

[method_matches2tracks]
# Trajectory construction configuration | 轨迹构建配置
use_feature_scoring=false
log_level=0

