# Strecha 数据集位姿约定

Strecha 数据集是一个广泛用于多视图立体视觉和SLAM算法评估的数据集。了解其相机位姿和投影文件的格式对于正确使用该数据集至关重要。

## 文档格式

Strecha 数据集的每个场景通常包含一系列与图像文件对应的 `.camera` 文件。例如，对于图像 `0001.jpg`，其对应的相机参数在 `0001.jpg.camera` 文件中。

每个 `.camera` 文件包含以下信息，按顺序排列：

1.  **内参矩阵 $K$** (3行): 一个 $3 \times 3$ 的相机内参矩阵。

    $$K = \begin{bmatrix} f_x & s & c_x \\ 0 & f_y & c_y \\ 0 & 0 & 1 \end{bmatrix}$$

    其中 $f_x$, $f_y$ 是焦距，$c_x$, $c_y$ 是主点坐标，$s$ 是扭曲系数（通常为0）。

2.  **空行** (1行): 一个空（零）行，用于分隔内参和外参。

3.  **旋转矩阵 $R^i_w$** (3行): 一个 $3 \times 3$ 的旋转矩阵<span style="color:red">(行优先存储)</span>。这表示从 **世界坐标系到相机 $i$ 坐标系** 的旋转。

4.  **相机中心 $\mathbf{t}^i_w$** (1行): 一个 $3 \times 1$ 的平移向量<span style="color:red">(行向量存储)</span>。这表示 **相机 $i$ 的光心在世界坐标系中的位置**。

## 全局相机位姿

根据上述文件格式，对于相机 $i$，我们直接从文件中读取得到：
*   旋转：$R^i_w$ (从 **世界坐标系到相机 $i$ 坐标系** 的旋转)
*   相机中心：$\mathbf{t}^i_w$ (相机 $i$ 的光心在 **世界坐标系** 中的3D坐标)

一个在世界坐标系下的3D点 $P_w$ 可以通过以下公式转换到相机 $i$ 的坐标系下的点 $P_{c,i}$：

$$P_i = R^i_w (P_w - \mathbf{t}^i_w)$$

这等效于使用增广矩阵 $[R^i_w | -R^i_w \mathbf{t}^i_w]$ 进行变换。

因此，通过Strecha真值文件读取，将加载到PoSDK `RwTw` 格式。

## 相对相机位姿

与 posdk 的约定一致（见 [posdk.md](../conventions/posdk.md)），Strecha 数据集的相对位姿也是以 `RwTw` 格式存储的。